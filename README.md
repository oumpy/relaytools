# RelayTools

原案・原作 AtamaokaC

toolsとあるけど現在1個（relayscheduler.py）しかない。関連スクリプトが増えたときは一緒に管理する予定。

## RelayScheduler

来週のリレー投稿担当者を順番に選んでSlackに投稿する。週ごとにファイルに保存。指定したチャンネルのメンバーを「Slack IDのsha256」の順で並べる。履歴の最後を取り出して、その次にあたる人から順番。履歴ファイルの番号は拡張グレゴリオ歴1年1月1日（月）を第0週とした週番号である。すでにファイルがある場合はリマインドする。cronで呼び出して使うのが基本。

（詳しくはあとで書く、かもしれない。）

### オプション

- `--noslack`：slackに投稿せず投稿用メッセージを画面に出力。
- `-r`, ` --reminder`：新規アナウンスではなく直近のリマインダを投稿。
- `--mute`：スレッド内投稿でチャンネルには表示しない。
- `--solopost`：スレッドを使わず単独メッセージとして投稿。従来のスレッドはそのまま。
- `--list`：メンバー全員の次回アナウンスからの順番を投稿。
- `--skipholiday`：祝休日はスキップする。日本の祝日（jpholidayパッケージ利用）のほか12/24-1/3を年末年始休暇に設定。
- `-c`, `--channnel`：読み込み・投稿するチャンネルを指定する。
- `-o`, `--outchannnel`：投稿するチャンネルを指定する。
- `--slacktoken`：BotのSlakc Tokenを指定する。
- `--date`：今日でなく任意の日付を指定する。